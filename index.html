<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Craig J Perry</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Craig J Perry">
<meta property="og:url" content="http://www.craigjperry.com/index.html">
<meta property="og:site_name" content="Craig J Perry">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Craig J Perry">
<meta name="twitter:description">
  
  
    <link rel="icon" href="/favicon.png">
  
  <!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'> -->
  <!-- <link href="//fonts.googleapis.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css"> -->
  <link href="//fonts.useso.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css">
  <link href='//fonts.useso.com/css?family=Open+Sans:300,600' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <a href="/" class="logo">Craig J Perry</a>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about/index.html">About</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.craigjperry.com"></form>
        </div>
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
        
        
          <a id="nav-github-link" class="nav-icon" href="https://github.com/ppoffice/hexo-theme-alex" title="Fork me on GitHub"></a>
        
      </nav>
    </div>
  </div>
</header>
      <nav id="mobile-nav" class="off">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about/index.html" class="mobile-nav-link">About</a>
  
  <div id="search-form-wrap-mobile">
    <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.craigjperry.com"></form>
  </div>
</nav>
      <div class="outer">
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/12/17/HC06-Bluetooth-Module/">HC06 Bluetooth Module</a>
          </li>
        
          <li>
            <a href="/2015/12/16/CP2102-and-Arduino/">CP2102 and Arduino</a>
          </li>
        
          <li>
            <a href="/2015/12/16/Unbricking-FTDI-Chips-with-Vagrant/">Unbricking FTDI Chips with Vagrant</a>
          </li>
        
          <li>
            <a href="/2015/12/16/ESP8266-Arduino/">ESP8266 Arduino</a>
          </li>
        
          <li>
            <a href="/2015/10/15/Hexo-with-Github-Pages/">Hexo with Github Pages</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">links</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="http://hexo.io">Hexo</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
        <section id="main">
  
    <article id="post-HC06-Bluetooth-Module" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/17/HC06-Bluetooth-Module/" class="article-date">
  <time datetime="2015-12-17T01:51:34.000Z" itemprop="datePublished">2015-12-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/17/HC06-Bluetooth-Module/">HC06 Bluetooth Module</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>The HC06 is the same hardware as HC05 but has fewer features. JY-MCU is written on the rear of HC06<br>modules.</p>
<h2 id="Connecting_To_The_Serial_Port">Connecting To The Serial Port</h2><p>These devices are 3.3v only. The wiring is straightforward:</p>
<pre><code>|<span class="string">  Serial Adapter  </span>|<span class="string">  HC06  </span>|
|<span class="string"> 3.3v             </span>|<span class="string"> Vcc    </span>|
|<span class="string"> Gnd              </span>|<span class="string"> Gnd    </span>|
|<span class="string"> Tx               </span>|<span class="string"> Rxd    </span>|
|<span class="string"> Rx               </span>|<span class="string"> Txd    </span>|
</code></pre><p>The state pin emits the same pattern as the red led and can be used to detect current status. The<br>key pin is unused.</p>
<h2 id="Entering_Commands">Entering Commands</h2><p>HC06 monitors input for 1 second then acts upon what’s been received. Newlines should not be used<br>at the end of commands, as would normally be the case for AT commands.</p>
<p>The available command set is small. The useful subset is easy to remember:</p>
<pre><code>|<span class="string"> Command    </span>|<span class="string"> Response   </span>|<span class="string"> Notes                           </span>|
|<span class="string"> AT         </span>|<span class="string"> OK         </span>|<span class="string"> Status check                    </span>|
|<span class="string"> AT+NAMEFoo </span>|<span class="string"> setname    </span>|<span class="string"> The bluetooth name is now "Foo" </span>|
|<span class="string"> AT+PIN1234 </span>|<span class="string"> setpin     </span>|<span class="string"> The bluetooth PIN is now 1234   </span>|
|<span class="string"> AT+BAUD4   </span>|<span class="string"> OK         </span>|<span class="string"> The default baud rate, 9600     </span>|
|<span class="string"> AT+BAUD8   </span>|<span class="string"> OK         </span>|<span class="string"> 115200 baud rate                </span>|
</code></pre><p>There are no terminating newlines in these commands. The HC06 simply waits for up to 1 second<br>and executes at command entered until that point. This means you’ll have to copy / paste commands<br>for them to be fully entered quickly enough.</p>
<h2 id="Using_The_Bluetooth_Serial_Bridge">Using The Bluetooth Serial Bridge</h2><p>Connect to the bluetooth device, connect to the bluetooth com port, now any text entered is<br>sent to the serial connection and vice versa.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.craigjperry.com/2015/12/17/HC06-Bluetooth-Module/" data-id="cii9lrl1w0003uolhwui13rbq" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-CP2102-and-Arduino" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/16/CP2102-and-Arduino/" class="article-date">
  <time datetime="2015-12-16T21:01:22.000Z" itemprop="datePublished">2015-12-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/16/CP2102-and-Arduino/">CP2102 and Arduino</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>There are 4 main USB to Serial chips sold on eBay:</p>
<ul>
<li>Genuine FTDI, rare and most expensive. Has the best drivers.</li>
<li>Fake FTDI, common and cheap. Shares the best drivers.</li>
<li>CP2102, common and cheap. Now has good drivers on all platforms</li>
<li>CH340G, ultra cheap and currently has terrible drivers although it’s still quite new so this may change</li>
</ul>
<p>To connect a CP2102 to an Arduino Pro Mini:</p>
<pre><code>|<span class="string">  CP2102   </span>|<span class="string">  Arduino </span>|
|<span class="string"> 5v / 3.3v </span>|<span class="string"> Vcc      </span>|
|<span class="string"> Txd       </span>|<span class="string"> Txd      </span>|
|<span class="string"> Rxd       </span>|<span class="string"> Rxd      </span>|
|<span class="string"> GND       </span>|<span class="string"> GND      </span>|
|<span class="string"> DTR       </span>|<span class="string"> DTR      </span>|
</code></pre><p><strong>NB:</strong> the pinouts are confusing here, i’d expect Txd to connect to Rxd and vice versa. Similarly i’d<br>expect DTR to be labelled RTS. The above is correct on my version of the cp2102 but it did cause me<br>some consternation to find this!</p>
<p>Different versions of the CP2102 breakout board are available. Some make for neater wiring connections<br>than others but all work just as well.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.craigjperry.com/2015/12/16/CP2102-and-Arduino/" data-id="cii9lrl0o0000uolhu5r22efc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Unbricking-FTDI-Chips-with-Vagrant" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/16/Unbricking-FTDI-Chips-with-Vagrant/" class="article-date">
  <time datetime="2015-12-16T20:45:44.000Z" itemprop="datePublished">2015-12-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/16/Unbricking-FTDI-Chips-with-Vagrant/">Unbricking FTDI Chips with Vagrant</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Some fake FTDI chips had their Product ID reset by old FTDI drivers from 0x6001 to 0x0000 which rendered<br>them unusable. It’s possible to reprogram the Product ID string and the modern FTDI drivers no longer<br>make this change. I used Vagrant to create a linux virtual machine for this:</p>
<pre><code><span class="title">vagrant</span> init ubuntu/trusty64
vagrant up
</code></pre><p>I plugged the FTDI in to my host. I opened the virtualbox GUI and assigned this USB device to the<br>VM. The required USB drivers are not present in this image, so i added them:</p>
<pre><code>sudo apt-<span class="keyword">get</span> install linux-image-extra-<span class="keyword">virtual</span>
</code></pre><p>It’s possible at this point to tell udev to use the ftdi_sio module for devices reporting a product<br>ID of 0x0000 but that would only make the chip usable from this virtual machine.</p>
<p>I downloaded Mark Lord’s ft232r_prog v1.25 from <a href="http://rtr.ca/ft232r/" target="_blank" rel="external">http://rtr.ca/ft232r/</a> and built it. I then used it<br>to update the configured product id:</p>
<pre><code>sudo ./ft232r_prog –old-pid <span class="number">0x000</span> –<span class="keyword">new</span>-pid <span class="number">0x6001</span>
</code></pre><p>After re-plugging the device in, it was usable as normal from my host machine.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.craigjperry.com/2015/12/16/Unbricking-FTDI-Chips-with-Vagrant/" data-id="cii9lrl1q0001uolhhjhoaoaa" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-ESP8266-Arduino" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/16/ESP8266-Arduino/" class="article-date">
  <time datetime="2015-12-16T19:18:31.000Z" itemprop="datePublished">2015-12-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/16/ESP8266-Arduino/">ESP8266 Arduino</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="The_Software">The Software</h2><p>The Arduino environment can be used to program ESP8266 WiFi boards. To configure the Arduino IDE v1.6.5<br>or newer, go to <em>File -&gt; Preferences</em> and add the following <em>Additional Boards Manager URL</em>:<br><a href="http://arduino.esp8266.com/stable/package_esp8266com_index.json" target="_blank" rel="external">http://arduino.esp8266.com/stable/package_esp8266com_index.json</a></p>
<p>Then go to <em>Tools -&gt; Board -&gt; Boards Manager</em>. Install the latest esp8266 board manager.</p>
<h3 id="Libraries">Libraries</h3><p>Available libraries include HTTP servers, mDNS / Bonjour &amp; SSDP service discovery alongside<br>any other Arduino libraries which don’t make use of native ATMEL hardware functions.</p>
<p>An implicit <em>ESP</em> object provides access to platform native functionality not found in the other<br>Arduino environments. </p>
<h2 id="The_Hardware">The Hardware</h2><p>The most common board is the ESP01. It’s a tiny 3.3v device with 2 rows of 4pin headers at one end and<br>a pcb antenna at the other. It’s capable of WiFi b/g/n in client or access point modes at up to 300m range.</p>
<p>The processor runs at 80MHz and has a 512K SPI flash alongside it which runs at 40MHz. 64K of this flash<br>is used as a filesystem (SPIFFS).</p>
<p>There are 4 GPIO pins, 2 of which double up as UART Tx/Rx. The UART defaults to 115200 baud rate. There’s<br>also a blue LED on the GPIO1 / UART TXD pin, it is active when the GPIO1 line is pulled low.</p>
<h3 id="Pinouts">Pinouts</h3><p>With the board sitting so that the PCB antenna is facing upwards on the right hand side, the pins are:</p>
<pre><code>|<span class="string"> GPIO1 / UART TXD / Blue LED </span>|<span class="string"> GND              </span>|
|<span class="string"> Chip Enable (pullup to Vcc) </span>|<span class="string"> GPIO2            </span>|<span class="string"> 
</span>|<span class="string"> RST                         </span>|<span class="string"> GPIO0            </span>|
|<span class="string"> Vcc                         </span>|<span class="string"> GPIO3 / UART RXD </span>|
</code></pre><p>If using GPIO1 and / or GPIO3, then the Serial port is unavailable. Likewise, if using the serial port<br>then only 2 GPIOs are available for use.</p>
<p>The nature of the pinout means these boards are not particularly easy to use with a protoyping<br>breadboard. I went with this idea: <a href="http://tim.jagenberg.info/2014/11/08/diy-esp8266ex-breadboard-adapter/" target="_blank" rel="external">http://tim.jagenberg.info/2014/11/08/diy-esp8266ex-breadboard-adapter/</a></p>
<h3 id="Programming_Connections">Programming Connections</h3><p>Whatever the pins are used for in your circuit, they are automatically overridden when the board is in<br>programming mode.</p>
<p>Connections to a 3.3v USB Serial adapter are:</p>
<pre><code>|<span class="string">   ESP8266   </span>|<span class="string">  Serial Adapter  </span>|
|<span class="string"> GPIO1 / Tx  </span>|<span class="string"> Rx               </span>|
|<span class="string"> GND         </span>|<span class="string"> GND              </span>|
|<span class="string"> Chip Enable </span>|<span class="string"> 3.3v             </span>|
|<span class="string"> GPIO2       </span>|<span class="string"> N/A              </span>|
|<span class="string"> RST         </span>|<span class="string"> RTS              </span>|
|<span class="string"> GPIO0       </span>|<span class="string"> DTR              </span>|
|<span class="string"> Vcc         </span>|<span class="string"> 3.3v             </span>|
|<span class="string"> GPIO3 / Rx  </span>|<span class="string"> Tx               </span>|
</code></pre><h3 id="Other_Boards">Other Boards</h3><p>Other boards are available, almost all of them expose more pins than the ESP01. The most flexible<br>appears to be the NodeMCU v1.0 which for around £5 comes with an ESP-12E, a much larger 4MB SPI flash,<br>an onboard voltage regulator and an onboard CP2012 USB to serial adapter all in a breadboard-friendly<br>sized package.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.craigjperry.com/2015/12/16/ESP8266-Arduino/" data-id="cii9lrl1z0004uolhvazmm1vc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Hexo-with-Github-Pages" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/15/Hexo-with-Github-Pages/" class="article-date">
  <time datetime="2015-10-15T22:06:31.000Z" itemprop="datePublished">2015-10-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/15/Hexo-with-Github-Pages/">Hexo with Github Pages</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>There are 3 steps to configuring the <a href="https://hexo.io/" target="_blank" rel="external">hexo</a> static site generator to use a custom domain while hosting on <a href="https://pages.github.com/" target="_blank" rel="external">Github Pages</a>:</p>
<ol>
<li>Create A Git Repo</li>
<li>Configure Hexo</li>
<li>Configure DNS</li>
</ol>
<p>Lastly there’s some notes on how to use this setup.</p>
<h2 id="Create_A_Git_Repo">Create A Git Repo</h2><p>Create an empty repo named <em>your-github-username.github.io</em> on the Github site.  Next, create a git repository to upload there:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[user@host ~]$ git init github-username.github.io</span><br><span class="line">[user@host ~]$ <span class="built_in">cd</span> github-username.github.io</span><br><span class="line">[user@host github-username.github.io]$ touch .gitignore</span><br><span class="line">[user@host github-username.github.io]$ git add .gitignore</span><br><span class="line">[user@host github-username.github.io]$ git commit <span class="string">'Initial Commit'</span></span><br><span class="line">[user@host github-username.github.io]$ git remote add origin ssh://git@github.com:Your-Github-Username/your-github-username.github.io.git</span><br></pre></td></tr></table></figure>
<p>There will be 2 branches in the repo:</p>
<ul>
<li>master: hosts your generated static html / css etc.</li>
<li>blog-setup: the name of this branch is unimportant, but it is an orphan branch and exists in parallel to master. The two are never merged. All your commits will be on this branch.</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[user@host github-username.github.io]$ git checkout --orphan blog-setup</span><br><span class="line">[user@host github-username.github.io]$ git rm -rf *</span><br><span class="line">[user@host github-username.github.io]$ cat - &gt; .gitignore &lt;&lt;EOF</span><br><span class="line">.DS_Store</span><br><span class="line">Thumbs.db</span><br><span class="line">db.json</span><br><span class="line">*.log</span><br><span class="line">node_modules/</span><br><span class="line">public/</span><br><span class="line">.deploy*/</span><br><span class="line">EOF</span><br><span class="line">[user@host github-username.github.io]$ git add .gitignore</span><br><span class="line">[user@host github-username.github.io]$ git commit -m <span class="string">'Initial commit of blog setup branch'</span></span><br><span class="line">[user@host github-username.github.io]$ git push -u origin blog-setup</span><br></pre></td></tr></table></figure>
<h2 id="Configure_Hexo">Configure Hexo</h2><p>First i installed hexo and created a site:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[user@host github-username.github.io]$ npm install hexo -g</span><br><span class="line">[user@host github-username.github.io]$ hexo init</span><br><span class="line">[user@host github-username.github.io]$ npm install</span><br><span class="line">[user@host github-username.github.io]$ hexo server</span><br><span class="line">INFO  Hexo is running at http://<span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">4000</span>/. Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure>
<p>Visiting the URL in your browser will show the default page. Next i installed a theme i liked from <a href="https://github.com/hexojs/hexo/wiki/Themes" target="_blank" rel="external">the wiki themes list</a>. I merged the theme repository as a subtree in git since in practice git submodules (the suggested method) can be quite clunky. The <a href="https://help.github.com/articles/about-git-subtree-merges/" target="_blank" rel="external">Github Page</a> on this topic is a good reference.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">[user@host github-username.github.io]$ git remote add <span class="operator">-f</span> alex https://github.com/ppoffice/hexo-theme-alex.git</span><br><span class="line">[user@host github-username.github.io]$ git merge <span class="operator">-s</span> ours --no-commit alex/master</span><br><span class="line">[user@host github-username.github.io]$ git <span class="built_in">read</span>-tree --prefix=themes/alex -u alex/master</span><br><span class="line">[user@host github-username.github.io]$ cat - &gt;&gt; _config.yml &lt;&lt;EOF</span><br><span class="line">theme: alex</span><br><span class="line"></span><br><span class="line"><span class="comment"># Overridable Alex theme setting defaults from themes/alex/_config.yml</span></span><br><span class="line">theme_config:</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Header</span></span><br><span class="line">  menu:</span><br><span class="line">    Home: /</span><br><span class="line">    Archives: /archives</span><br><span class="line">    About: /about/index.html</span><br><span class="line">  rss: </span><br><span class="line">  github: https://github.com/ppoffice/hexo-theme-alex</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Content</span></span><br><span class="line">  excerpt_link: Read More</span><br><span class="line">  fancybox: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Sidebar</span></span><br><span class="line">  sidebar: left</span><br><span class="line">  widgets:</span><br><span class="line">  - category</span><br><span class="line">  - archive</span><br><span class="line">  - recent_posts</span><br><span class="line">  - tag</span><br><span class="line">  - tagcloud</span><br><span class="line">  - links</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Links</span></span><br><span class="line">  links: </span><br><span class="line">    Hexo: http://hexo.io</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Miscellaneous</span></span><br><span class="line">  google_analytics:</span><br><span class="line">  favicon: /favicon.png</span><br><span class="line">  twitter:</span><br><span class="line">  google_plus:</span><br><span class="line">  fb_admins:</span><br><span class="line">  fb_app_id:</span><br><span class="line">EOF</span><br><span class="line">[user@host github-username.github.io]$ git commit -m <span class="string">'Import alex theme'</span></span><br></pre></td></tr></table></figure>
<p>Next i made the site deployable to github pages. I already have an SSH key trusted by github so i will deploy my git repo by SSH.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[user@host github-username.github.io]$ npm install hexo-deployer-git --save</span><br><span class="line">[user@host github-username.github.io]$ cat - &gt;&gt; _config.yml &lt;&lt;EOF</span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo: ssh://git@github.com/Your-Github-Username/your-github-username.github.io</span><br><span class="line">  branch: master</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<h2 id="Configure_DNS">Configure DNS</h2><p>Firstly, Github Pages requires that we publish a file called CNAME to the root of our repository (master branch). Since hexo performs a force push to that location, if we simply added the CNAME file it would be overwritten at deployment time. There is a simple plugin available to perform this for us though:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[user@host github-username.github.io]$ npm install hexo-generator-cname --save</span><br><span class="line">[user@host github-username.github.io]$ cat - &gt;&gt; _config.yml &lt;&lt;EOF</span><br><span class="line">plugins:</span><br><span class="line">- hexo-generator-cname</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<p>Now when <code>hexo generate</code> is run, a CNAME file containing your domain name (configured from the url variable in _config.yml) will be created.</p>
<p>Lastly, you need to login to your DNS provider and create a DNS CNAME record pointing hostname <em>www</em> to <em>your-github-username.github.io</em>. This can take a few hours to replicate. </p>
<h2 id="Using_This_Setup">Using This Setup</h2><p>Now that the configuration is complete, we can actually publish some posts!</p>
<h3 id="Leverging_Git:_A_Branching_Strategy">Leverging Git: A Branching Strategy</h3><p>We have 2 unrelated branches in our repo: master; blog-setup. We never directly edit anything in master, that’s updated for us when we run <code>hexo deploy</code>. The <em>blog-setup</em> branch contains the hexo site and i create branches off that for each of my posts:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[user@host github-username.github.io]$ git branch</span><br><span class="line">* blog-setup</span><br><span class="line">  master</span><br><span class="line">[user@host github-username.github.io]$ git checkout -b my-next-post-topic</span><br><span class="line">[user@host github-username.github.io]$ hexo new post <span class="string">"My Next Post Topic"</span></span><br><span class="line">[user@host github-username.github.io]$ git add .</span><br><span class="line">[user@host github-username.github.io]$ git commit -m <span class="string">"Started topic"</span></span><br><span class="line">[user@host github-username.github.io]$ git push -u origin my-next-post-topic</span><br></pre></td></tr></table></figure>
<p>When i’ve made my last commit and i’m ready to publish, i merge the branch back to blog-setup before running <code>hexo generate</code> and <code>hexo deploy</code>. The neat thing about pushing the branch upstream is that i can work on it over a few days from different machines, using Github as both an offsite backup and a synchronisation mechanism.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.craigjperry.com/2015/10/15/Hexo-with-Github-Pages/" data-id="cii9lrl1t0002uolh6r0zzc9w" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
  
</section>
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      <a href="/" class="logo">Craig J Perry</a>
      &copy; 2015 Craig J Perry<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    

<script src="/js/jquery.min.js" type="text/javascript"></script>
<script src="/js/jquery.scrollLoading.js" type="text/javascript"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>